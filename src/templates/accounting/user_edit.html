{% extends "base.html" %}
{% load static %}
{% block title %}IDEAL_ASP{% endblock %}
{% block style %}<link rel="stylesheet" type="text/css" href="{% static 'css/accounting/user_edit.css' %}">{% endblock %}
{% block content %}
<div id="sideBar_wrapper" class="sideBar">
    {% include "side-bar.html" %}
</div>
<div class="d-flex flex-row flex-wrap main-body">
    <main class="col-12">
        {% if save_message %}
            <div class="save-message alert-{{ alert_type }}" style="text-align: center;">
                {{ save_message }}
            </div>
        {% endif %}
        <span>{{ error }}</span>
    	<form action="{% url 'accounting:user_update' user.id %}" method="post">
            {% csrf_token %}
            <input type="hidden" name="id" value={{user.id}}>
            <div class="row">
                <div class="table-responsive col-6">
                    <table class="table table-striped text-nowrap">
                        <tbody>
                            <tr>
                                <th>社員ID</th>
                                <td>
                                    <div class="input-group-sm">
                                        <input class="form-control" type="text" name="code" value="{{ user.code }}">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th>名前</th>
                                <td>
                                    <div class="input-group-sm">
                                        <input class="form-control" type="text" name="name" value="{{ user.name }}">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th>ふりがな</th>
                                <td>
                                    <div class="input-group-sm">
                                        <input class="form-control" type="text" name="kana" value="{{ user.kana }}">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th>社員グループ名</th>
                                <td>
                                	<!-- {{ employee_group.name }} -->
                                    <select name="employee_group_id" class="form-control">
                                        {% for employee_group in employee_groups %}
                                            <option value="{{ employee_group.id }}" {% if user.employee_group_id == employee_group.id %}selected{% endif %}>
                                                {{ employee_group.name }}
                                            </option>
                                        {% endfor %}
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <th>都道府県</th>
                                <td>
                                    <select name="address_state_id" class="form-control">
                                        <option value="0"></option>
                                        {% for state in states %}
                                            <option value="{{ state.id }}" {% if user.address_state_id == state.id %}selected{% endif %}>
                                                {{ state.name }}
                                            </option>
                                        {% endfor %}
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <th>市区町村</th>
                                <td>
                                    <div class="input-group-sm">
                                        <input class="form-control" type="text" name="city" value="{{ user.city }}" maxlength='150'>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th>番地</th>
                                <td>
                                    <div class="input-group-sm">
                                        <input class="form-control" type="text" name="street" value="{{ user.street }}" maxlength='150'>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th>建物名/部屋番号など</th>
                                <td>
                                    <div class="input-group-sm">
                                        <input class="form-control" type="text" name="building" value="{{ user.building|default:'' }}" maxlength='150'>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th>電話番号</th>
                                <td>
                                    <div class="input-group-sm">
                                        <input class="form-control" type="tel" name="tel" value="{{ user.tel }}">
                                    </div>
                                </td>
                            </tr>
                
                            <tr>
                                <th>部署</th>
                                <td>
                                    <div class="input-group-sm">
                                        <input class="form-control" type="text" name="department" value="{{ user.department|default:'' }}">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th>職種</th>
                                <td>
                                    <div class="input-group-sm">
                                	   <input class="form-control" type="text" name="occupation" value="{{ user.occupation|default:'' }}">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th>役職</th>
                                <td>
                                    <div class="input-group-sm">
                                	   <input class="form-control" type="text" name="position" value="{{ user.position|default:'' }}">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th>メールアドレス</th>
                                <td>
                                    <div class="input-group-sm">
                                        <input class="form-control" type="email" name="email" value="{{ user.email }}">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th>印鑑</th>
                                <td>
                                    <div class="seal" id="preview">
                                        <img src="{% static 'images/seals/'|add:user.code|add:'.png' %}" width="59%">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th>在籍 or 退職 or 契約</th>
                                <td>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="status" value="1" {% if user.status == 1 %}checked{% endif %}>
                                        <label class="form-check-label">在籍</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="status" value="0" {% if user.status == 0 %}checked{% endif %}>
                                      <label class="form-check-label">退職</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="status" value="3" {% if user.status == 3 %}checked{% endif %}>
                                      <label class="form-check-label">契約</label>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th>最終更新日時</th>
                                <td>
                                    {{ user.updated_at|default:'' }}
                                </td>
                            </tr>
                            <tr>
                                <th>最終更新者</th>
                                <td>
                                    <div class="input-group-sm">
                                        <!-- <input class="form-control" type="text" name="updated_user_name" value="{{ client.updated_user_name|default:'' }}"> -->
                                        {% if user.updated_user_name != None %}
                                            {{user.updated_user_name}}
                                        {% endif %}
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="table-responsive col-6">
                    <table class="table table-striped text-nowrap">
                        <tbody>
                            <tr>
                                <th>緊急連絡先名</th>
                                <td>
                                    <div class="input-group-sm">
                                        <input class="form-control" type="text" name="emergency_contact_name" value="{{ user.emergency_contact_name|default:'' }}">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th>続柄</th>
                                <td>
                                    <div class="input-group-sm">
                                        <input class="form-control" type="text" name="relationship" value="{{ user.relationship|default:'' }}">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th>緊急連絡先住所</th>
                                <td>
                                    <div class="input-group-sm">
                                        <input class="form-control" type="text" name="emergency_contact_address" value="{{ user.emergency_contact_address|default:'' }}">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th>緊急連絡先電話番号</th>
                                <td>
                                    <div class="input-group-sm">
                                        <input class="form-control" type="tel" name="emergency_contact_tel" value="{{ user.emergency_contact_tel|default:'' }}">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th>緊急連絡先メールアドレス</th>
                                <td>
                                    <div class="input-group-sm">
                                        <input class="form-control" type="email" name="emergency_contact_email" value="{{ user.emergency_contact_email|default:'' }}">
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-striped text-nowrap">
                        <tbody>
                            <tr>
                                <th>資格名</th>
                                <td>
                                    <textarea name="qualification" value="{{ user.qualification|default:'' }}">{{ user.qualification|default:'' }}</textarea>

                                    <!-- <textarea name="remarks" value="{{ user.remarks|default:'' }}">{{ user.remarks|default:'' }}</textarea> -->
                                </td>
                            </tr>
                            <tr>
                                <th>取得日</th>
                                <td>
                                    <!-- <input class="form-control" type="text" name="qualification_acquisition_date" value="{{ user.qualification_acquisition_date|default:'' }}"> -->
                                    <input type="text" class="form-control" name="qualification_acquisition_date" {% if user.qualification_acquisition_date == None %}value=""{% else %}value="{{ user.qualification_acquisition_date}}"{% endif %} onfocus="type='date'"></td>
                                </td>
                            </tr>
                            <tr>
                                <th>資格種別</th>
                                <td>
                                    <select name="qualification_type" class="form-control">
                                        <option value="0" {% if user.qualification_type == 0 %}selected{% endif %}></option>
                                        <option value="1" {% if user.qualification_type == 1 %}selected{% endif %}>
                                            雇入・職長特別教育
                                        </option>
                                        <option value="2" {% if user.qualification_type == 2 %}selected{% endif %}>
                                            技術講習
                                        </option>
                                        <option value="3" {% if user.qualification_type == 3 %}selected{% endif %}>
                                            免許
                                        </option>
                                        <option value="4" {% if user.qualification_type == 4 %}selected{% endif %}>
                                            その他
                                        </option>

                                        
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <th>備考</th>
                                <td>
                                    <textarea name="qualification_remarks" value="{{ user.qualification_remarks|default:'' }}" rows=3>{{ user.qualification_remarks|default:'' }}</textarea>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <table class="table table-striped text-nowrap">
                        <tbody>
                            <tr>
                                <th>備考</th>
                                <td>
                                    <div class="input-group-sm">
                                        <textarea name="remarks" value="{{ user.remarks|default:'' }}" rows=3>{{ user.remarks|default:'' }}</textarea>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="wrapper_button"> 
                <a href="{% url 'accounting:user' %}">
                	<button type="button" class="btn-back btn btn-outline-warning btn-md"><i class="sub-icon fas fa-angle-double-left"></i>戻る</button>
                </a>
                <button type="submit" class="btn-update btn btn-outline-warning btn-md"><i class="sub-icon fas fa-file-export"></i>保存</button>
                <a href="{% url 'accounting:user_delete' user.id %}">
                    <button type="button" class="btn-delete btn btn_delete btn-outline-warning btn-md"><i class="sub-icon fas fa-trash-alt"></i>消去</button>
                </a>
            </div>
        </form>
    </main>
</div>
{% endblock %}
{% block script %}<script type="text/javascript" src="{% static 'js/accounting/user_edit.js' %}"></script>{% endblock %}