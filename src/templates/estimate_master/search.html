{% extends "base.html" %}
{% load static %}
{% block title %}IDEAL_ASP{% endblock %}
{% block style %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/constructions/detail.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/constructions/paper_manage/detail.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/estimate_master/index.css' %}">
{% endblock %}
{% block content %}
<div id="sideBar_wrapper" class="sideBar">
    {% include "side-bar.html" %}
</div>
<div class="d-flex flex-row flex-wrap main-body">
    <main class="col-md-12">
        <div id="_message-box" class="{{ alert_type }}">{{ alert_message }}</div>
        <div class="wrapper_button">
            <a href="{% url 'estimate_master:add' %}">
              <button type="button" class="btn btn-outline-warning btn-md"><i class="sub-icon fas fa-user-plus"></i>新規作成</button>
            </a>
            <button type="button" class="btn btn-outline-warning btn-md" id="selected-delete-btn"><i class="sub-icon fas fa-trash-alt"></i>選択消去</button>
        </div>
        <div class="table-responsive">
          {% if estimation_entry_templates %}
            <table class="table table-striped table-bordered text-nowrap">
                <thead>
                    <tr>
                        <th>選択</th>
                        <th>見積マスタ番号</th>
                        <th>分類1</th>
                        <th>分類2</th>
                        <th>内訳</th>
                        <th>明細</th>
                    </tr>
                </thead>
                <form action="{% url 'estimate_master:selected_delete' %}" method="POST" id="selected_delete_form">
                    {% csrf_token %}
                    <tbody>
                        {% for targetObject in estimation_entry_templates %}
                            <tr class="_row{{ targetObject.id }}">
                                <td><input type="checkbox" name="estimation_entry_template_id" value="{{ targetObject.id }}"></td>
                                <td><a href="{% url 'estimate_master:edit' targetObject.id %}">{{ targetObject.code }}</a></td>
                                <td>{{ targetObject.taxonomy1 }}</td>
                                <td>{{ targetObject.taxonomy2 }}</td>
                                <td>{{ targetObject.name }}</td>
                                <td>{{ targetObject.detail_names }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </form>
            </table>
          {% else %}
            <p class="text-center font-weight-bold"> データが存在しません。</p>
          {% endif %}
        </div>
    </main>
</div>
{% endblock %}
{% block script %}
<script type="text/javascript" src="{% static 'js/estimate_master/index.js' %}"></script>
{% endblock %}
