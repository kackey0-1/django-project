{% load static %}
{% load choice_utilities %}
{% block content %}
        <p>■備考</p>
        <form action="{% url 'constructions:history_create' construction.id %}" method="post" id="construnction_log_form">
            {% csrf_token %}
            <div class="form_area">
                <div class="form-group">
                    {{ history_form.description }}
                </div><br>
                <div class="wrapper_button">
                    <button type="submit" class="btn btn-create btn-outline-warning btn-md _jsConstructionHistoryAddBtn"><i class="sub-icon fas fa-plus-circle"></i>追加</button>
                </div>
            </div>
        </form>
        <p>■履歴</p>
        <div class="table-responsive">
            <table class="table table-striped table-bordered text-nowrap">
                <thead>
                    <tr>
                        <th>区分</th>
                        <th>内容</th>
                        <th>更新者</th>
                        <th>更新日時</th>
                    </tr>
                </thead>
                <tbody>
                    {% for history in construction.construction_logs %}
                    <tr>
                        <td>{{ history.type | choice_label:'LOG_TYPE' }}</td>
                        <td>{{ history.description|linebreaksbr }}</td>
                        {% if history.updated_id %}
                        <td>{{ history.updated.name }}</td>
                        {% else %}
                        <td>-</td>
                        {% endif %}
                        <td>{{ history.updated_at|date:"Y/n/j H:m" }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
{% endblock %}
